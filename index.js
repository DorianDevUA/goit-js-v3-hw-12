var C=n=>{throw TypeError(n)};var T=(n,e,t)=>e.has(n)||C("Cannot "+t);var h=(n,e,t)=>(T(n,e,"read from private field"),t?t.call(n):e.get(n)),y=(n,e,t)=>e.has(n)?C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),i=(n,e,t,o)=>(T(n,e,"write to private field"),o?o.call(n,t):e.set(n,t),t);import{a as O,S as U,i as R,H as z}from"./assets/vendor-DvBWQevJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();class H{constructor({selector:e,enabledLabel:t,disabledLabel:o,hidden:l=!1}){this.refs=this.getRefs(e),this.enabledLabel=t,this.disabledLabel=o,l&&this.hide()}getRefs(e){const t={};return t.button=document.querySelector(e),t.label=t.button.querySelector(".custom-btn-label"),t.spinner=t.button.querySelector(".custom-btn-spinner"),t}enable(){this.refs.button.disabled=!1,this.refs.label.textContent=this.enabledLabel,this.refs.spinner.classList.add("is-hidden")}disable(){this.refs.button.disabled=!0,this.refs.label.textContent=this.disabledLabel,this.refs.spinner.classList.remove("is-hidden")}show(){this.refs.button.classList.remove("is-hidden")}hide(){this.refs.button.classList.add("is-hidden")}}const F="43520057-d4110ce2722b475a1deefaa82";O.defaults.baseURL="https://pixabay.com/api";O.defaults.headers.common["Content-Type"]="application/json";var g,m,w,f,b;class G{constructor({limit:e=20}={}){y(this,g);y(this,m);y(this,w);y(this,f);y(this,b);i(this,g,""),i(this,m,1),i(this,w,e),i(this,f,1),i(this,b,!1)}get searchQuery(){return h(this,g)}set searchQuery(e){i(this,g,e.trim().toLowerCase())}get totalPages(){return h(this,f)}get isLastPage(){return h(this,b)}incrementPage(){i(this,m,h(this,m)+1)}reset(){i(this,m,1),i(this,f,1),i(this,b,!1)}async fetchImages(){const e={method:"GET",params:{key:F,q:h(this,g),page:h(this,m),per_page:h(this,w),image_type:"photo",orientation:"horizontal",safesearch:!0}},{data:{totalHits:t,hits:o}}=await O("/",e);return this.incrementPage(),i(this,f,Math.ceil(t/h(this,w))),i(this,b,h(this,m)>h(this,f)),o}}g=new WeakMap,m=new WeakMap,w=new WeakMap,f=new WeakMap,b=new WeakMap;class B{constructor(){this.lightbox=null}initialize(){const e=".js-gallery a",t={captions:!0,captionsData:"alt",captionDelay:250};this.lightbox=new U(e,t)}refresh(){this.lightbox&&this.lightbox.refresh()}}class D{constructor(){}showWarningMsg(e){R.warning({position:"topRight",message:e})}showErrorMsg(e){R.error({position:"topRight",message:e})}showInfoMsg(e){R.info({position:"topRight",message:e})}}const Q=z.template({1:function(n,e,t,o,l){var s,r=e??(n.nullContext||{}),c=n.hooks.helperMissing,u="function",d=n.escapeExpression,a=n.lookupProperty||function(M,j){if(Object.prototype.hasOwnProperty.call(M,j))return M[j]};return"  <li class='gallery-item' data-id='"+d((s=(s=a(t,"id")||(e!=null?a(e,"id"):e))!=null?s:c,typeof s===u?s.call(r,{name:"id",hash:{},data:l,loc:{start:{line:2,column:36},end:{line:2,column:42}}}):s))+`'>
    <article class='card'>
      <div class='card-thumb'>
        <a class='card-link' href='`+d((s=(s=a(t,"largeImageURL")||(e!=null?a(e,"largeImageURL"):e))!=null?s:c,typeof s===u?s.call(r,{name:"largeImageURL",hash:{},data:l,loc:{start:{line:5,column:35},end:{line:5,column:52}}}):s))+`'>
          <img
            class='card-image'
            src='`+d((s=(s=a(t,"webformatURL")||(e!=null?a(e,"webformatURL"):e))!=null?s:c,typeof s===u?s.call(r,{name:"webformatURL",hash:{},data:l,loc:{start:{line:8,column:17},end:{line:8,column:33}}}):s))+`'
            alt='`+d((s=(s=a(t,"tags")||(e!=null?a(e,"tags"):e))!=null?s:c,typeof s===u?s.call(r,{name:"tags",hash:{},data:l,loc:{start:{line:9,column:17},end:{line:9,column:25}}}):s))+`'
            width='360'
            height='200'
          />
        </a>
      </div>

      <div class='card-content'>
        <ul class='card-socials'>
          <li>
            <h3>likes</h3>
            <p>`+d((s=(s=a(t,"likes")||(e!=null?a(e,"likes"):e))!=null?s:c,typeof s===u?s.call(r,{name:"likes",hash:{},data:l,loc:{start:{line:20,column:15},end:{line:20,column:24}}}):s))+`</p>
          </li>
          <li>
            <h3>views</h3>
            <p>`+d((s=(s=a(t,"views")||(e!=null?a(e,"views"):e))!=null?s:c,typeof s===u?s.call(r,{name:"views",hash:{},data:l,loc:{start:{line:24,column:15},end:{line:24,column:24}}}):s))+`</p>
          </li>
          <li>
            <h3>comments</h3>
            <p>`+d((s=(s=a(t,"comments")||(e!=null?a(e,"comments"):e))!=null?s:c,typeof s===u?s.call(r,{name:"comments",hash:{},data:l,loc:{start:{line:28,column:15},end:{line:28,column:27}}}):s))+`</p>
          </li>
          <li>
            <h3>downloads</h3>
            <p>`+d((s=(s=a(t,"downloads")||(e!=null?a(e,"downloads"):e))!=null?s:c,typeof s===u?s.call(r,{name:"downloads",hash:{},data:l,loc:{start:{line:32,column:15},end:{line:32,column:28}}}):s))+`</p>
          </li>
        </ul>
      </div>
    </article>
  </li>
`},compiler:[8,">= 4.3.0"],main:function(n,e,t,o,l){var s,r=n.lookupProperty||function(c,u){if(Object.prototype.hasOwnProperty.call(c,u))return c[u]};return(s=r(t,"each").call(e??(n.nullContext||{}),e,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:0},end:{line:38,column:9}}}))!=null?s:""},useData:!0}),k=document.querySelector(".js-gallery ul");function E(n){k.insertAdjacentHTML("beforeend",Q(n))}function _(){k.innerHTML=""}class K{constructor({selector:e,hidden:t=!1}){this.refs=this.getRefs(e),t&&this.hide()}getRefs(e){const t={};return t.loader=document.querySelector(e),t.label=t.loader.querySelector(".label"),t.spinner=t.loader.querySelector(".spinner"),t}show(){this.refs.loader.classList.remove("visually-hidden")}hide(){this.refs.loader.classList.add("visually-hidden")}}const x={searchForm:document.querySelector(".js-gallery-search-form"),galleryObserverGuard:document.querySelector(".js-guard-gallery")},L={badRequest:"Введіть запит у поле для пошуку!",notFound:"Нічого не знайдено. Спробуйте щось інше!",endOfSearch:"Вибачте, але ви досягли кінця результатів пошуку"},p=new G({limit:40}),v=new D,A=new B,S=new K({selector:".js-loader",hidden:!0}),P=new IntersectionObserver(N,{root:null,rootMargin:"300px"}),I=x.galleryObserverGuard,q=new H({selector:".js-gallery-search-btn",enabledLabel:"Знайти",disabledLabel:"Пошук",hidden:!1});q.enable();x.searchForm.addEventListener("submit",W);async function W(n){n.preventDefault();const e=n.currentTarget,t=e.elements.query.value.trim();if(!t){v.showWarningMsg(L.badRequest);return}_(),p.reset(),P.unobserve(I),q.disable(),S.show(),p.searchQuery=t;try{const o=await p.fetchImages();o.length?(E(o),A.initialize(),x.galleryItem=document.querySelector(".js-gallery li"),p.isLastPage?v.showInfoMsg(L.endOfSearch):P.observe(I)):v.showErrorMsg(L.notFound)}catch(o){console.log(o.message)}S.hide(),q.enable(),e.reset()}function N(n){n.forEach(async e=>{if(e.isIntersecting){P.unobserve(I),S.show();try{const t=await p.fetchImages();E(t),A.refresh();const{height:o}=x.galleryItem.getBoundingClientRect();window.scrollBy({top:o*2,behavior:"smooth"}),p.isLastPage?v.showInfoMsg(L.endOfSearch):P.observe(I)}catch(t){console.log(t.message)}S.hide()}})}
//# sourceMappingURL=index.js.map
