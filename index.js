var C=n=>{throw TypeError(n)};var j=(n,e,t)=>e.has(n)||C("Cannot "+t);var h=(n,e,t)=>(j(n,e,"read from private field"),t?t.call(n):e.get(n)),y=(n,e,t)=>e.has(n)?C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),o=(n,e,t,a)=>(j(n,e,"write to private field"),a?a.call(n,t):e.set(n,t),t);import{a as R,S as U,i as I,H as z}from"./assets/vendor-DvBWQevJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();class F{constructor({selector:e,enabledLabel:t,disabledLabel:a,hidden:l=!1}){this.refs=this.getRefs(e),this.enabledLabel=t,this.disabledLabel=a,l&&this.hide()}getRefs(e){const t={};return t.button=document.querySelector(e),t.label=t.button.querySelector(".custom-btn-label"),t.spinner=t.button.querySelector(".custom-btn-spinner"),t}enable(){this.refs.button.disabled=!1,this.refs.label.textContent=this.enabledLabel,this.refs.spinner.classList.add("is-hidden")}disable(){this.refs.button.disabled=!0,this.refs.label.textContent=this.disabledLabel,this.refs.spinner.classList.remove("is-hidden")}show(){this.refs.button.classList.remove("is-hidden")}hide(){this.refs.button.classList.add("is-hidden")}}const G="43520057-d4110ce2722b475a1deefaa82";R.defaults.baseURL="https://pixabay.com/api/";R.defaults.headers.common["Content-Type"]="application/json";var f,m,w,g,b;class H{constructor({limit:e=20}={}){y(this,f);y(this,m);y(this,w);y(this,g);y(this,b);o(this,f,""),o(this,m,1),o(this,w,e),o(this,g,1),o(this,b,!1)}get searchQuery(){return h(this,f)}set searchQuery(e){o(this,f,e.trim().toLowerCase())}get totalPages(){return h(this,g)}get isLastPage(){return h(this,b)}incrementPage(){o(this,m,h(this,m)+1)}reset(){o(this,f,""),o(this,m,1),o(this,g,1),o(this,b,!1)}async fetchImages(){const e={method:"GET",params:{key:G,q:h(this,f),page:h(this,m),per_page:h(this,w),image_type:"photo",orientation:"horizontal",safesearch:!0}},{data:{totalHits:t,hits:a}}=await R("",e);return this.incrementPage(),o(this,g,Math.ceil(t/h(this,w))),o(this,b,h(this,m)>h(this,g)),a}}f=new WeakMap,m=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap;class D{constructor(){this.lightbox=null}initialize(){const e=".js-gallery a",t={captions:!0,captionsData:"alt",captionDelay:250};this.lightbox=new U(e,t)}refresh(){this.lightbox.refresh()}}class Q{constructor(){}showWarningMsg(e){I.warning({position:"topRight",message:e})}showErrorMsg(e){I.error({position:"topRight",message:e})}showInfoMsg(e){I.info({position:"topRight",message:e})}}const _=z.template({1:function(n,e,t,a,l){var s,r=e??(n.nullContext||{}),c=n.hooks.helperMissing,u="function",d=n.escapeExpression,i=n.lookupProperty||function(q,M){if(Object.prototype.hasOwnProperty.call(q,M))return q[M]};return"  <li class='gallery-item' data-id='"+d((s=(s=i(t,"id")||(e!=null?i(e,"id"):e))!=null?s:c,typeof s===u?s.call(r,{name:"id",hash:{},data:l,loc:{start:{line:2,column:36},end:{line:2,column:42}}}):s))+`'>
    <article class='card'>
      <div class='card-thumb'>
        <a class='card-link' href='`+d((s=(s=i(t,"largeImageURL")||(e!=null?i(e,"largeImageURL"):e))!=null?s:c,typeof s===u?s.call(r,{name:"largeImageURL",hash:{},data:l,loc:{start:{line:5,column:35},end:{line:5,column:52}}}):s))+`'>
          <img
            class='card-image'
            src='`+d((s=(s=i(t,"webformatURL")||(e!=null?i(e,"webformatURL"):e))!=null?s:c,typeof s===u?s.call(r,{name:"webformatURL",hash:{},data:l,loc:{start:{line:8,column:17},end:{line:8,column:33}}}):s))+`'
            alt='`+d((s=(s=i(t,"tags")||(e!=null?i(e,"tags"):e))!=null?s:c,typeof s===u?s.call(r,{name:"tags",hash:{},data:l,loc:{start:{line:9,column:17},end:{line:9,column:25}}}):s))+`'
            width='360'
            height='200'
          />
        </a>
      </div>

      <div class='card-content'>
        <ul class='card-socials'>
          <li>
            <h3>likes</h3>
            <p>`+d((s=(s=i(t,"likes")||(e!=null?i(e,"likes"):e))!=null?s:c,typeof s===u?s.call(r,{name:"likes",hash:{},data:l,loc:{start:{line:20,column:15},end:{line:20,column:24}}}):s))+`</p>
          </li>
          <li>
            <h3>views</h3>
            <p>`+d((s=(s=i(t,"views")||(e!=null?i(e,"views"):e))!=null?s:c,typeof s===u?s.call(r,{name:"views",hash:{},data:l,loc:{start:{line:24,column:15},end:{line:24,column:24}}}):s))+`</p>
          </li>
          <li>
            <h3>comments</h3>
            <p>`+d((s=(s=i(t,"comments")||(e!=null?i(e,"comments"):e))!=null?s:c,typeof s===u?s.call(r,{name:"comments",hash:{},data:l,loc:{start:{line:28,column:15},end:{line:28,column:27}}}):s))+`</p>
          </li>
          <li>
            <h3>downloads</h3>
            <p>`+d((s=(s=i(t,"downloads")||(e!=null?i(e,"downloads"):e))!=null?s:c,typeof s===u?s.call(r,{name:"downloads",hash:{},data:l,loc:{start:{line:32,column:15},end:{line:32,column:28}}}):s))+`</p>
          </li>
        </ul>
      </div>
    </article>
  </li>
`},compiler:[8,">= 4.3.0"],main:function(n,e,t,a,l){var s,r=n.lookupProperty||function(c,u){if(Object.prototype.hasOwnProperty.call(c,u))return c[u]};return(s=r(t,"each").call(e??(n.nullContext||{}),e,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:0},end:{line:38,column:9}}}))!=null?s:""},useData:!0}),T=document.querySelector(".js-gallery");function k(n){T.insertAdjacentHTML("beforeend",_(n))}function B(){T.innerHTML=""}class K{constructor({selector:e,hidden:t=!1}){this.refs=this.getRefs(e),t&&this.hide()}getRefs(e){const t={};return t.loader=document.querySelector(e),t.label=t.loader.querySelector(".label"),t.spinner=t.loader.querySelector(".spinner"),t}show(){this.refs.loader.hidden=!1,this.refs.spinner.classList.remove("is-hidden"),this.refs.label.textContent="Loading images, please wait"}hide(){this.refs.loader.hidden=!0,this.refs.spinner.classList.add("is-hidden"),this.refs.label.textContent=""}}const E={searchForm:document.querySelector(".js-gallery-search-form"),galleryObserverGuard:document.querySelector(".js-guard-gallery")},L={badRequest:"Введіть запит у поле для пошуку!",notFound:"Нічого не знайдено. Спробуйте щось інше!",endOfSearch:"Вибачте, але ви досягли кінця результатів пошуку"},p=new H({limit:9}),v=new Q,A=new D,S=new K({selector:".js-loader",hidden:!0}),P=new IntersectionObserver(N,{root:null,rootMargin:"500px"}),x=E.galleryObserverGuard,O=new F({selector:".js-gallery-search-btn",enabledLabel:"Знайти",disabledLabel:"Пошук",hidden:!1});O.enable();E.searchForm.addEventListener("submit",W);async function W(n){n.preventDefault();const e=n.currentTarget,t=e.elements.query.value.trim();if(!t){v.showWarningMsg(L.badRequest);return}B(),p.reset(),P.unobserve(x),O.disable(),S.show(),p.searchQuery=t;const a=await p.fetchImages();a.length?(k(a),A.initialize(),p.isLastPage?v.showInfoMsg(L.endOfSearch):P.observe(x)):v.showErrorMsg(L.notFound),S.hide(),O.enable(),e.reset()}function N(n){n.forEach(async e=>{if(e.isIntersecting){P.unobserve(x),S.show();const t=await p.fetchImages();k(t),A.refresh(),S.hide(),p.isLastPage?v.showInfoMsg(L.endOfSearch):P.observe(x)}})}
//# sourceMappingURL=index.js.map
